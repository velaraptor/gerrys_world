# Gerry's World
![LOGO](shiny-app/img/logo.png?raw=true)

### Table of Contents
- [Project Description](#project-description)
- [Data](#data)
- [Roadmap](#roadmap)
- [Development](#development)
- [Authors](#authors)
- [Acknowledgments](#acknowledgments)
## Project Description
Gerry's World is a Shiny application primarily created in R. This application allows for a user to modify existing congressional districts in Texas to create new lines that are equal in population and lean towards the actual state voting. 

Our hope is that we can not only teach people how gerrymandering works at a state level, but potentially allow users to crowd source the lines to help legislators and the courts get a better idea of what the citizens of Texas believe are just and fair district lines. 

![LOGO](shiny-app/img/gerrys_world.png?raw=true)

## Data

The data used in the backend on our Postgres Database includes:
* Current ACS Census Tract Data 
	* Income
	* Race
	* Total Population
* 2016 Presidential Results - (ftp://ftpgis1.tlc.state.tx.us/elections)
* Shapefiles for Congressional Districts, Voting Districts, and Census Tracts

## Roadmap
Currently the app is being hosted @ https://velaraptor.shinyapps.io/gerrys_world
The app has a native Google Auth login. This a production server so it will not being running as quickly, Currently you can edit the congressional districts and save a shapefile of your edited districts and a copy will be written to the database. 

* The next steps are to migrate this app to either an AWS server or a paid Shinyapp.io server to handle more users & better authentication.
* ~~Add a live leaderboard from submitted user districts.~~
* Create a how to play video to allow users to better understand how to play. 
* Add Income Dot Map Tile
* Make Login page live. 
* ~~Save simplified congressional districts to database, to unburden load on app making polygons simplified.~~ 
* Fix potential error with native population numbers. 
* QA Test the shit out of it. 
* ~~Coastal Districts don't have valid geoms, ST_MAKEVALID()~~

## Development
To start this Shiny App on your local computer, first make sure you have gdal installed.
```
brew install gdal
```
If you haven't uploaded the most recent version of R, download [here](https://cran.r-project.org/). 

When you first open R, execute this code to correctly download all the dependent libraries. 
```R 
install.packages(c('devtools','rgeos','rgdal','sp','leaflet','DT','dplyr','RPostgreSQL','DBI','shinythemes','shiny','highcharter','googleAuthR','data.table','rpostgis','rmapshaper','leaflet.extras','RJSONIO','geojsonio','shinyjs'),dependencies=T)
devtools::install_github("MarkEdmondson1234/googleID")
```
If you need the credentials to the database, please contact me here or @ [Twitter](https://www.twitter.com/velaraptor). 
**FYI trying to run this app without the credentials wont run the app.**

Lastly within the directory of this github repo on your local machine, run this code to get an instance of the shiny app on your local machine @ http://localhost:6262.

```R 
library(shiny)
runApp('shiny-app',port=6262)
```
## Authors 
* **Chris Vela**

## Acknowledgments
In addition to using PostGIS queries to achieve intersection of all the geographical polygons, we would want to thank the guys who created [Leaflet.Extras](https://github.com/bhaskarvk/leaflet.extras) that allowed us to edit polygons in a leaflet framework. 

Additionally, QGIS plugin [QTiles](https://github.com/nextgis/QTiles) for allowing us to create map tiles with dot densities for demographics. 
